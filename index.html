<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tienda Online</title>

<style>
body{
    margin:0;
    font-family:Arial, Helvetica, sans-serif;
    background:#f2f2f2;
}

header{
    background:#1f2937;
    color:white;
    padding:15px;
    text-align:center;
    position:relative;
}

/* Carrito icono */
.cart-icon{
    position:absolute;
    right:20px;
    top:15px;
    font-size:28px;
    cursor:pointer;
}

.cart-count{
    position:absolute;
    top:-8px;
    right:-10px;
    background:red;
    color:white;
    font-size:14px;
    border-radius:50%;
    padding:3px 7px;
}

/* Productos */
.products{
    display:grid;
    grid-template-columns:repeat(auto-fit,minmax(200px,1fr));
    gap:20px;
    padding:20px;
}

.product{
    background:white;
    border-radius:10px;
    padding:15px;
    text-align:center;
    box-shadow:0 3px 8px rgba(0,0,0,0.1);
}

.product img{
    width:100%;
    height:150px;
    object-fit:cover;
    border-radius:8px;
}

.product button{
    margin-top:10px;
    padding:8px 12px;
    background:#10b981;
    border:none;
    color:white;
    border-radius:6px;
    cursor:pointer;
}

/* Carrito lateral */
.cart-panel{
    position:fixed;
    top:0;
    right:-350px;
    width:300px;
    height:100%;
    background:white;
    box-shadow:-3px 0 10px rgba(0,0,0,0.2);
    transition:0.3s;
    padding:20px;
    overflow-y:auto;
}

.cart-panel.active{
    right:0;
}

.cart-item{
    margin-bottom:10px;
    border-bottom:1px solid #ddd;
    padding-bottom:5px;
}

.cart-panel button{
    width:100%;
    padding:10px;
    background:#f59e0b;
    border:none;
    color:white;
    border-radius:6px;
    cursor:pointer;
}

/* Bot√≥n volver */
.back-btn{
    margin:20px;
    padding:8px 15px;
    background:#374151;
    color:white;
    border:none;
    border-radius:6px;
    cursor:pointer;
}

/* Estilos para el bot√≥n de cerrar (X) */
.cart-panel button.close-btn {
    background:none;
    border:none;
    font-size:30px;
    color:#333;
    cursor:pointer;
    font-weight:bold;
    padding:5px;
    margin-left:auto;
    display:block;
}
.cart-panel button.close-btn:hover {
    color:red;
}
</style>
</head>

<body>

<header>
    Mi Tienda
    <div class="cart-icon" onclick="toggleCart()">
        üõí
        <span id="cart-count" class="cart-count">0</span>
    </div>
</header>

<div id="content" class="products"></div>

<!-- Carrito -->
<div id="cart-panel" class="cart-panel">
    
    <div style="display:flex; justify-content:space-between; align-items:center;">
        <h2>Tu Pedido</h2>
        <button class="close-btn" onclick="toggleCart()">‚úñ</button>
    </div>

    <div id="cart-items"></div>
    <h3>Total: $<span id="total">0</span></h3>
    <button onclick="sendOrder()">Pedir por WhatsApp</button>
</div>

<script>

const phoneNumber = "5491123456789"; // CAMBIAR

let cart = [];

const products = [
    {id:1, name:"Producto A", price:15, img:"https://picsum.photos/300?1"},
    {id:2, name:"Producto B", price:20, img:"https://picsum.photos/300?2"},
    {id:3, name:"Forros", type:"forros", img:"https://picsum.photos/300?3"}
];

const modelosForros = [
    {id:101, name:"Modelo 1", img:"https://picsum.photos/300?4"},
    {id:102, name:"Modelo 2", img:"https://picsum.photos/300?5"}
];

const forrosDisponibles = {
    101:[
        {id:201, name:"Forro Rojo", price:25, img:"https://picsum.photos/300?6"},
        {id:202, name:"Forro Azul", price:30, img:"https://picsum.photos/300?7"}
    ],
    102:[
        {id:203, name:"Forro Negro", price:28, img:"https://picsum.photos/300?8"}
    ]
};

function renderProducts(list){
    const content = document.getElementById("content");
    content.innerHTML="";
    list.forEach(p=>{
        content.innerHTML+=`
        <div class="product">
            <img src="${p.img}">
            <h3>${p.name}</h3>
            ${p.price? `<p>$${p.price}</p>`:""}
            <button onclick="handleClick(${p.id})">
                ${p.type==="forros"?"Ver Modelos":"Agregar"}
            </button>
        </div>
        `;
    });
}

function handleClick(id){
    const product = products.find(p=>p.id===id);
    if(product && product.type==="forros"){
        renderModelos();
    } else {
        addToCart(product);
    }
}

function renderModelos(){
    const content = document.getElementById("content");
    content.innerHTML=`<button class="back-btn" onclick="renderProducts(products)">‚¨Ö Volver</button>`;
    modelosForros.forEach(m=>{
        content.innerHTML+=`
        <div class="product">
            <img src="${m.img}">
            <h3>${m.name}</h3>
            <button onclick="renderForros(${m.id})">Ver Forros</button>
        </div>
        `;
    });
}

function renderForros(modeloId){
    const content = document.getElementById("content");
    content.innerHTML=`<button class="back-btn" onclick="renderModelos()">‚¨Ö Volver</button>`;
    forrosDisponibles[modeloId].forEach(f=>{
        content.innerHTML+=`
        <div class="product">
            <img src="${f.img}">
            <h3>${f.name}</h3>
            <p>$${f.price}</p>
            <button onclick='addToCart(${JSON.stringify(f)})'>Agregar</button>
        </div>
        `;
    });
}

function addToCart(product){
    if(typeof product === "string"){
        product = JSON.parse(product);
    }
    cart.push(product);
    updateCart();
}

function updateCart(){
    const container = document.getElementById("cart-items");
    container.innerHTML="";
    let total=0;
    cart.forEach((item,index)=>{
        total+=item.price;
        container.innerHTML+=`
        <div class="cart-item">
            ${item.name} - $${item.price}
            <button onclick="removeItem(${index})">‚ùå</button>
        </div>`;
    });
    document.getElementById("total").innerText=total;
    document.getElementById("cart-count").innerText=cart.length;
}

function removeItem(index){
    cart.splice(index,1);
    updateCart();
}

function toggleCart(){
    const panel = document.getElementById("cart-panel");
    panel.classList.toggle("active");
}

function sendOrder(){
    if(cart.length===0){ alert("Carrito vac√≠o"); return; }
    let message="Hola quiero pedir:%0A";
    let total=0;
    cart.forEach(item=>{
        message+=`- ${item.name} ($${item.price})%0A`;
        total+=item.price;
    });
    message+=`%0ATotal: $${total}`;
    window.open(`https://wa.me/${phoneNumber}?text=${message}`,"_blank");
}

renderProducts(products);

</script>

</body>
</html>
